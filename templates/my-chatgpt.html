{% extends "base.html" %}

{% block content %}

    <style>
        #generated-output{
            padding: 10px;
            background-color: #eee;
            margin-top: 30px;
        }
    </style>
    <h3>My ChatGPT Application</h3>
    <form action="/generate_text" method="post">
        <div class="row">
            <div class="col-10">
                <textarea class="form-control" rows="5" cols="20" name="prompt" id="prompt"></textarea>
            </div>
            <div class="col-2">
                <br>
                <button type="button" id="submit-prompt" class="btn btn-primary">Submit</button>
            </div>
        </div>

        <div id="generated-output">AI Generated Text</div>
    </form>
{% endblock %}

{% block my_javascript %}
<script type="text/javascript">
    $(function (){
        $('#submit-prompt').click(function (){
            $('#submit-prompt').prop('disabled', true)
            $('#generated-output').html("Loading...");
            $.ajax({
                url:'/generate_text',
                type:'POST',
                data:{
                    'prompt': $('#prompt').val()
                }
            }).done(function(data) {
                $('#submit-prompt').prop('disabled', false)
                $('#generated-output').html(data);
            });
        });
    });
</script>

{% endblock %}
